<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Juego de Rana Tradicional de Colombia</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      margin: 0;
      padding: 20px;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .container {
      background-color: white;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      padding: 30px;
      max-width: 1000px;
      width: 100%;
    }

    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 30px;
      font-size: 2.5em;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    .btn {
      background: linear-gradient(45deg, #76b947, #5a9b3a);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 25px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.3);
    }

    .btn:active {
      transform: translateY(0);
    }

    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      animation: fadeIn 0.3s ease;
    }
    
     @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            60% { transform: translateY(-10px); }
        }
            .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        .confetti {
            position: absolute;
            width: 12px;
            height: 12px;
            animation: confetti-fall linear infinite;
            transform-origin: center center;
        }

        .confetti.square {
            background: #ff6b6b;
            transform: rotate(45deg);
        }

        .confetti.circle {
            background: #4ecdc4;
            border-radius: 50%;
        }

        .confetti.triangle {
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-bottom: 12px solid #45b7d1;
        }

        .confetti.rectangle {
            width: 8px;
            height: 16px;
            background: #f9ca24;
        }

        .confetti.diamond {
            background: #6c5ce7;
            transform: rotate(45deg);
            border-radius: 20%;
        }

        .confetti.star {
            background: #fd79a8;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        }

        .confetti.heart {
            width: 12px;
            height: 12px;
            background: #e17055;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            transform: rotate(-45deg);
        }

        .confetti.heart::before {
            content: '';
            width: 12px;
            height: 12px;
            background: #e17055;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            position: absolute;
            left: -6px;
            top: 0;
            transform: rotate(-90deg);
        }

        .confetti.heart::after {
            content: '';
            width: 12px;
            height: 12px;
            background: #e17055;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            position: absolute;
            left: 0;
            top: -6px;
            transform: rotate(90deg);
        }

        @keyframes confetti-fall {
            0% {
                opacity: 1;
                transform: translateY(0) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(-100vh) rotate(360deg);
            }
        }

        .button-container {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }

        .celebration-btn {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }

        .celebration-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        }

        .celebration-btn:active {
            transform: translateY(0);
        }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      background-color: white;
      margin: 5% auto;
      padding: 30px;
      border-radius: 15px;
      width: 90%;
      max-width: 600px;
      max-height: 78vh;
      overflow-y: auto;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      animation: slideIn 0.3s ease;
      box-sizing: border-box;
    }

    @keyframes slideIn {
      from { transform: translateY(-50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .modal h2 {
      color: #333;
      margin-bottom: 20px;
      text-align: center;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      color: #555;
      font-weight: bold;
    }

    .form-group input {
      width: 100%;
      padding: 10px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s ease;
      box-sizing: border-box;
    }

    .form-group input:focus {
      outline: none;
      border-color: #76b947;
    }

    .player-input {
      background-color: #f9f9f9;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 10px;
    }

    .modal-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }

    .btn-secondary {
      background: linear-gradient(45deg, #6c757d, #5a6268);
    }

    /* Tabla de resultados */
    .tabla-container {
      display: none;
      margin-top: 30px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    th {
      background: linear-gradient(45deg, #76b947, #5a9b3a);
      color: white;
      padding: 15px;
      font-weight: bold;
    }

    td {
      padding: 12px;
      border-bottom: 1px solid #eee;
      text-align: center;
    }

    tr:nth-child(even) {
      background-color: #f8f9fa;
    }

    tr:hover {
      background-color: #e8f5e8;
    }

    .turno-info {
      background: linear-gradient(45deg, #ff6b6b, #ee5a52);
      color: white;
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      margin-bottom: 20px;
      font-size: 18px;
      font-weight: bold;
    }

    .score-input {
      text-align: center;
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
      border: 2px solid #ddd;
      transition: all 0.3s ease;
      margin: 20px 0;
    }

    .score-input:hover {
      border-color: #76b947;
      transform: translateY(-2px);
    }

    .score-input label {
      display: block;
      margin-bottom: 15px;
      color: #555;
      font-weight: bold;
      font-size: 18px;
    }

    .score-input input {
      width: 120px;
      padding: 15px;
      border: 2px solid #ddd;
      border-radius: 8px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
    }

    /* Nuevos estilos para la secci√≥n de ranas */
    .ranas-section {
      background: #e8f5e8;
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
      border: 2px solid #76b947;
    }

    .ranas-title {
      text-align: center;
      color: #333;
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 20px;
    }

    .rana-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: white;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 10px;
      border: 2px solid #ddd;
      transition: all 0.3s ease;
    }

    .rana-item:hover {
      border-color: #76b947;
      transform: translateY(-2px);
    }

    .rana-info {
      display: flex;
      align-items: center;
      gap: 10px;
      flex: 1;
    }

    .rana-emoji {
      font-size: 24px;
    }

    .rana-text {
      font-weight: bold;
      color: #333;
    }

    .rana-puntos {
      color: #76b947;
      font-weight: bold;
      margin-left: 10px;
    }

    .rana-controls {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .rana-input {
      width: 60px;
      padding: 8px;
      border: 2px solid #ddd;
      border-radius: 5px;
      text-align: center;
      font-weight: bold;
    }

    .rana-input:focus {
      outline: none;
      border-color: #76b947;
    }

    .total-calculado {
      background: linear-gradient(45deg, #17a2b8, #138496);
      color: white;
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      margin-top: 15px;
    }

    .winner-alert {
      background: linear-gradient(45deg, #28a745, #20c997);
      color: white;
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      margin: 20px 0;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    .puntaje-info {
      background: linear-gradient(45deg, #17a2b8, #138496);
      color: white;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      text-align: center;
    }

    .resumen-final {
      max-width: 1200px;
      margin: 5% auto 0 auto;
    }

    .resumen-final table {
      font-size: 14px;
    }

    .resumen-final th {
      font-size: 12px;
      padding: 10px 5px;
    }

    .resumen-final td {
      padding: 8px 5px;
    }

    .btn-close {
      background: linear-gradient(45deg, #dc3545, #c82333);
      margin-top: 20px;
    }
    
    /* Estilos para el selector de modo de juego mejorado */
.modo-juego-container { 
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); 
    border-radius: 15px; 
    padding: 25px; 
    margin: 20px 0; 
    /* Removido el borde verde que causaba el problema */
    box-shadow: 0 8px 25px rgba(0,0,0,0.1); 
} 

.modo-juego-title { 
    text-align: center; 
    font-size: 20px; 
    font-weight: bold; 
    color: #333; 
    margin-bottom: 25px; 
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1); 
} 

.modo-selector { 
    display: flex; 
    justify-content: center; 
    gap: 20px; 
    margin-bottom: 20px; 
    /* Ajustado el padding para mejor alineaci√≥n */
    padding: 0 10px;
} 

.modo-option { 
    position: relative; 
    cursor: pointer; 
    transition: all 0.3s ease; 
} 

.modo-option input[type="radio"] { 
    position: absolute; 
    opacity: 0; 
    cursor: pointer; 
} 

.modo-card {
    background: white;
    border: 3px solid #ddd;
    border-radius: 15px;
    padding: 18px 25px;
    text-align: center;
    transition: all 0.3s ease;
    min-width: 100px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

/* HOVER SOLO PARA TARJETAS NO SELECCIONADAS */ 
.modo-option input[type="radio"]:not(:checked) + .modo-card:hover { 
    transform: translateY(-3px); 
    box-shadow: 0 6px 20px rgba(0,0,0,0.15); 
    border-color: #aaa; 
} 

/* ESTILOS PARA TARJETA SELECCIONADA */ 
.modo-option input[type="radio"]:checked + .modo-card { 
    border-color: #76b947; 
    background: linear-gradient(135deg, #e8f5e8, #d4edda); 
    transform: translateY(-3px); 
    box-shadow: 0 6px 20px rgba(118, 185, 71, 0.3); 
} 

.modo-icon { 
    font-size: 2.5em; 
    margin-bottom: 10px; 
    display: block; 
    /* Centrar mejor el icono */
    line-height: 1;
} 

.modo-title { 
    font-weight: bold; 
    font-size: 16px; 
    color: #333; 
    margin-bottom: 5px; 
} 

.modo-description { 
    font-size: 12px; 
    color: #666; 
    line-height: 1.3; 
} 

.modo-option input[type="radio"]:checked + .modo-card .modo-title { 
    color: #76b947; 
} 

.modo-option input[type="radio"]:checked + .modo-card .modo-icon { 
    animation: bounce 0.6s ease; 
} 

@keyframes bounce { 
    0%, 20%, 50%, 80%, 100% { 
        transform: translateY(0); 
    } 
    40% { 
        transform: translateY(-10px); 
    } 
    60% { 
        transform: translateY(-5px); 
    } 
}

/* Animaci√≥n para la transici√≥n de configuraci√≥n de equipos */
.configuracion-equipos-transition {
  transition: all 0.5s ease;
  overflow: hidden;
}

.configuracion-equipos-transition.show {
  max-height: 400px;
  opacity: 1;
  margin-top: 15px;
}

.configuracion-equipos-transition.hide {
  max-height: 0;
  opacity: 0;
  margin-top: 0;
}
  </style>
</head>
<body>
  <audio id="audioResumen" src="celebracion.mp3" preload="auto"></audio>
  <div class="confetti-container" id="confettiContainer"></div>
  
  <div class="container">
    <h1>üê∏ Juego de Rana Tradicional üê∏</h1>
    
    <div id="inicio">
      <div style="text-align: center;">
        <button class="btn" onclick="mostrarConfiguracion()">
          üéÆ Configurar Nuevo Juego
        </button>
      </div>
    </div>

    <div class="tabla-container" id="tablaContainer">
      <h2 style="text-align: center; color: #333;">üìä Tabla de Puntajes</h2>
      <div class="turno-info" id="turnoInfo"></div>
      <table id="tabla">
        <thead>
          <tr>
            <th>üèÜ Jugador</th>
            <th>üìà Puntaje Total</th>
            <th>üê∏ Rana Peque√±a</th>
            <th>üê∏ Rana Mediana</th>
            <th>üê∏ Rana Grande</th>
          </tr>
        </thead>
        <tbody id="cuerpoTabla"></tbody>
      </table>
      <div style="text-align: center; margin-top: 20px;">
        <button class="btn" onclick="mostrarTurno()">
          üéØ Registrar Tiro
        </button>
        <button class="btn btn-secondary" onclick="reiniciarJuego()">
          üîÑ Nuevo Juego
        </button>
      </div>
    </div>
  </div>

  <!-- Modal de Configuraci√≥n -->
  <div id="modalConfiguracion" class="modal">
    <div class="modal-content">
      <h2>‚öôÔ∏è Configuraci√≥n del Juego</h2>
         <div class="modo-juego-container">
    <div class="modo-juego-title">üéÆ Selecciona el Modo de Juego</div>
    
    <div class="modo-selector">
        <div class="modo-option">
            <input type="radio" id="modoIndividual" name="modoJuego" value="individual" checked onchange="toggleModoEquipos()">
            <label for="modoIndividual" class="modo-card">
                <span class="modo-icon">üë§</span>
                <div class="modo-title">Individual</div>
                <div class="modo-description">Cada jugador compite por s√≠ mismo</div>
            </label>
        </div>
        
        <div class="modo-option">
            <input type="radio" id="modoEquipos" name="modoJuego" value="equipos" onchange="toggleModoEquipos()">
            <label for="modoEquipos" class="modo-card">
                <span class="modo-icon">üë•</span>
                <div class="modo-title">En Equipos</div>
                <div class="modo-description">Los jugadores se organizan en equipos</div>
            </label>
        </div>
    </div>
           
</div>
      <div class="modo-juego-container">
    <div class="modo-juego-title">üéØ Selecciona el Tipo de Juego</div>
    
    <div class="modo-selector">
        <div class="modo-option">
            <input type="radio" id="tipoMeta" name="tipoJuego" value="meta" checked onchange="toggleTipoJuego()">
            <label for="tipoMeta" class="modo-card">
                <span class="modo-icon">üèÜ</span>
                <div class="modo-title">Por Meta</div>
                <div class="modo-description">El primero en alcanzar la meta gana</div>
            </label>
        </div>
        
        <div class="modo-option">
            <input type="radio" id="tipoRondas" name="tipoJuego" value="rondas" onchange="toggleTipoJuego()">
            <label for="tipoRondas" class="modo-card">
                <span class="modo-icon">üîÑ</span>
                <div class="modo-title">Por Rondas</div>
                <div class="modo-description">Al final de X rondas, el mayor puntaje gana</div>
            </label>
        </div>
    </div>
</div>
<div id="configuracionEquiposDiv" class="configuracion-equipos-transition hide">
    <div class="form-group">
        <label>N√∫mero de equipos:</label>
        <input type="number" id="numEquipos" min="2" max="5" value="2" onchange="actualizarNumeroJugadores()">
    </div>
    <div class="form-group">
        <label>Jugadores por equipo:</label>
        <input type="number" id="jugadoresPorEquipo" min="1" max="5" value="2" onchange="actualizarNumeroJugadores()">
    </div>
    
    <!-- Configuraci√≥n por Meta para Equipos -->
    <div id="configMetaEquipos" class="configuracion-equipos-transition show">
        <div class="form-group">
            <label>Meta de puntaje:</label>
            <input type="number" id="metaPuntajeEquipos" min="100" max="1000" value="150">
        </div>
    </div>
    
    <!-- Configuraci√≥n por Rondas para Equipos -->
    <div id="configRondasEquipos" class="configuracion-equipos-transition hide">
        <div class="form-group">
            <label>N√∫mero de rondas:</label>
            <input type="number" id="numRondasEquipos" min="3" max="20" value="5">
        </div>
    </div>
</div>
<!-- Configuraci√≥n para modo individual -->
<div id="configuracionIndividualDiv" class="configuracion-equipos-transition show">
    <div class="form-group">
        <label>Cantidad de jugadores:</label>
        <input type="number" id="numJugadores" min="1" max="10" value="2">
    </div>
    
    <!-- Configuraci√≥n por Meta -->
    <div id="configMeta" class="configuracion-equipos-transition show">
        <div class="form-group">
            <label>Meta de puntaje:</label>
            <input type="number" id="metaPuntaje" min="50" max="1000" value="100">
        </div>
    </div>
    
    <!-- Configuraci√≥n por Rondas -->
    <div id="configRondas" class="configuracion-equipos-transition hide">
        <div class="form-group">
            <label>N√∫mero de rondas:</label>
            <input type="number" id="numRondas" min="3" max="20" value="5">
        </div>
    </div>
</div>
      <div class="form-group">
        <label>Puntaje Rana Peque√±a:</label>
        <input type="number" id="ranaPequena" value="5">
      </div>
      <div class="form-group">
        <label>Puntaje Rana Mediana:</label>
        <input type="number" id="ranaMediana" value="10">
      </div>
      <div class="form-group">
        <label>Puntaje Rana Grande:</label>
        <input type="number" id="ranaGrande" value="20">
      </div>
      <div class="modal-buttons">
        <button class="btn" onclick="configurarJugadores()">
          ‚û°Ô∏è Configurar Jugadores
        </button>
        <button class="btn btn-secondary" onclick="cerrarModal('modalConfiguracion')">
          ‚ùå Cancelar
        </button>
      </div>
    </div>
  </div>

  <!-- Modal de Jugadores -->
  <div id="modalJugadores" class="modal">
    <div class="modal-content">
      <h2>üë• Configurar Jugadores</h2>
      <div id="jugadoresInputs"></div>
      <div class="modal-buttons">
        <button class="btn" onclick="iniciarJuego()">
          üöÄ Iniciar Juego
        </button>
        <button class="btn btn-secondary" onclick="volverConfiguracion()">
          ‚¨ÖÔ∏è Volver
        </button>
      </div>
    </div>
  </div>

  <!-- Modal de Turno MODIFICADO -->
  <div id="modalTurno" class="modal">
    <div class="modal-content">
      <h2 id="tituloTurno"></h2>
      <div class="puntaje-info" id="puntajeInfo"></div>
      
      <div class="score-input">
        <label>üéØ Puntaje Total Obtenido</label>
        <input type="number" id="puntajeTiro" min="0" value="0" placeholder="Ingresa el puntaje total" onchange="actualizarCalculoTotal()">
      </div>

      <!-- NUEVA SECCI√ìN PARA SELECCI√ìN MANUAL DE RANAS -->
      <div class="ranas-section">
        <div class="ranas-title">üê∏ Seleccionar Ranas Obtenidas</div>
        
        <div class="rana-item">
          <div class="rana-info">
            <span class="rana-emoji">üê∏</span>
            <span class="rana-text">Rana Peque√±a</span>
            <span class="rana-puntos" id="puntosRanaPeque√±a">5 pts c/u</span>
          </div>
          <div class="rana-controls">
            <label>Cantidad:</label>
            <input type="number" id="cantidadRanaPequena" class="rana-input" min="0" value="0" onchange="actualizarCalculoTotal()">
          </div>
        </div>

        <div class="rana-item">
          <div class="rana-info">
            <span class="rana-emoji">üê∏</span>
            <span class="rana-text">Rana Mediana</span>
            <span class="rana-puntos" id="puntosRanaMediana">10 pts c/u</span>
          </div>
          <div class="rana-controls">
            <label>Cantidad:</label>
            <input type="number" id="cantidadRanaMediana" class="rana-input" min="0" value="0" onchange="actualizarCalculoTotal()">
          </div>
        </div>

        <div class="rana-item">
          <div class="rana-info">
            <span class="rana-emoji">üê∏</span>
            <span class="rana-text">Rana Grande</span>
            <span class="rana-puntos" id="puntosRanaGrande">20 pts c/u</span>
          </div>
          <div class="rana-controls">
            <label>Cantidad:</label>
            <input type="number" id="cantidadRanaGrande" class="rana-input" min="0" value="0" onchange="actualizarCalculoTotal()">
          </div>
        </div>

        <div class="total-calculado" id="totalCalculado">
          Total por ranas: 0 puntos
        </div>
      </div>

      <div class="modal-buttons">
        <button class="btn" onclick="registrarTiro()">
          ‚úÖ Registrar Tiro
        </button>
        <button class="btn btn-secondary" onclick="cerrarModal('modalTurno')">
          ‚ùå Cancelar
        </button>
      </div>
    </div>
  </div>

  <!-- Modal de Resumen Final -->
  <div id="modalResumen" class="modal">
    <div class="modal-content resumen-final">
      <h2>üèÜ Resumen Final de la Partida</h2>
      <div id="ganadorFinal"></div>
      <div id="resumenContenido"></div>
      <div class="modal-buttons">
        <button class="btn btn-close" onclick="cerrarModal('modalResumen')">
          üîÑ Cerrar y Nuevo Juego
        </button>
      </div>
    </div>
  </div>

  <script>

function toggleModoEquipos() {
    const modoEquiposRadio = document.getElementById('modoEquipos');
    modoEquipos = modoEquiposRadio.checked;
    
    const configEquiposDiv = document.getElementById('configuracionEquiposDiv');
    const configIndividualDiv = document.getElementById('configuracionIndividualDiv');
    const numJugadoresInput = document.getElementById('numJugadores');
    
    if (modoEquipos) {
        // Mostrar configuraci√≥n de equipos, ocultar individual
        configEquiposDiv.className = 'configuracion-equipos-transition show';
        configIndividualDiv.className = 'configuracion-equipos-transition hide';
        numJugadoresInput.disabled = true;
        actualizarNumeroJugadores();
    } else {
        // Mostrar configuraci√≥n individual, ocultar equipos
        configEquiposDiv.className = 'configuracion-equipos-transition hide';
        configIndividualDiv.className = 'configuracion-equipos-transition show';
        numJugadoresInput.disabled = false;
    }
    
    // L√çNEA AGREGADA: Actualizar la visibilidad de meta/rondas despu√©s del cambio
    toggleTipoJuego();
}  
    
function toggleTipoJuego() {
    const tipoMetaRadio = document.getElementById('tipoMeta');
    modoJuegoPorMeta = tipoMetaRadio.checked;
    
    // Configuraci√≥n individual
    const configMeta = document.getElementById('configMeta');
    const configRondas = document.getElementById('configRondas');
    
    // Configuraci√≥n equipos
    const configMetaEquipos = document.getElementById('configMetaEquipos');
    const configRondasEquipos = document.getElementById('configRondasEquipos');
    
    if (modoJuegoPorMeta) {
        // Mostrar configuraci√≥n por meta
        configMeta.className = 'configuracion-equipos-transition show';
        configRondas.className = 'configuracion-equipos-transition hide';
        configMetaEquipos.className = 'configuracion-equipos-transition show';
        configRondasEquipos.className = 'configuracion-equipos-transition hide';
    } else {
        // Mostrar configuraci√≥n por rondas
        configMeta.className = 'configuracion-equipos-transition hide';
        configRondas.className = 'configuracion-equipos-transition show';
        configMetaEquipos.className = 'configuracion-equipos-transition hide';
        configRondasEquipos.className = 'configuracion-equipos-transition show';
    }
}

function actualizarNumeroJugadores() {
    const numEquipos = parseInt(document.getElementById('numEquipos').value) || 2;
    const jugadoresPorEquipo = parseInt(document.getElementById('jugadoresPorEquipo').value) || 2;
    document.getElementById('numJugadores').value = numEquipos * jugadoresPorEquipo;
}
    
    const confettiContainer = document.getElementById('confettiContainer');
        const shapes = ['square', 'circle', 'triangle', 'rectangle', 'diamond', 'star', 'heart'];
        const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#6c5ce7', '#fd79a8', '#e17055', '#00d2d3', '#ff7675', '#a29bfe'];

        function createConfetti(startX, startY) {
            const confetti = document.createElement('div');
            confetti.className = `confetti ${shapes[Math.floor(Math.random() * shapes.length)]}`;
            
            // Posici√≥n inicial
            confetti.style.left = startX + 'px';
            confetti.style.bottom = startY + 'px';
            
            // Color aleatorio
            const color = colors[Math.floor(Math.random() * colors.length)];
            if (!confetti.classList.contains('triangle') && !confetti.classList.contains('star') && !confetti.classList.contains('heart')) {
                confetti.style.background = color;
            }
            
            // Animaci√≥n personalizada
            const duration = Math.random() * 4 + 3; // 2-5 segundos
            const delay = Math.random() * 0.5;
            const endX = window.innerWidth / 2 + (Math.random() - 0.5) * 800; // Hacia el centro con variaci√≥n
            const endY = window.innerHeight + 100;
            
            confetti.style.animationDuration = duration + 's';
            confetti.style.animationDelay = delay + 's';
            
            // Trayectoria hacia el centro
            confetti.animate([
                {
                    transform: `translate(0, 0) rotate(0deg)`,
                    opacity: 1
                },
                {
                    transform: `translate(${endX - startX}px, -${endY}px) rotate(${Math.random() * 720}deg)`,
                    opacity: 0
                }
            ], {
                duration: (duration + delay) * 1000,
                easing: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)'
            });
            
            confettiContainer.appendChild(confetti);
            
            // Eliminar despu√©s de la animaci√≥n
            setTimeout(() => {
                if (confetti.parentNode) {
                    confetti.parentNode.removeChild(confetti);
                }
            }, (duration + delay + 0.5) * 1000);
        }

        function createConfettiFromCorners() {
            // Esquina inferior izquierda - m√°s confeti
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    createConfetti(Math.random() * 100, Math.random() * 50);
                }, i * 50);
            }
            
            // Esquina inferior derecha - m√°s confeti
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    createConfetti(window.innerWidth - Math.random() * 100, Math.random() * 50);
                }, i * 50);
            }
        }

        function createInitialBurst() {
            // R√°faga inicial masiva
            for (let burst = 0; burst < 3; burst++) {
                setTimeout(() => {
                    createConfettiFromCorners();
                }, burst * 300);
            }
        }

        function createConfettiBurst() {
            // Crear r√°faga desde ambas esquinas
            createConfettiFromCorners();
        }

        // Iniciar confeti autom√°tico
        function startAutoConfetti() {
            createConfettiFromCorners();
            setTimeout(startAutoConfetti, 3000); // Cada 3 segundos
        }

        // Responsive
        window.addEventListener('resize', () => {
            // Limpiar confeti existente si es necesario
        });
    
    let jugadores = [];
    let ronda = 1;
    let turno = 0;
    let meta = 0;
    let puntos = { pequena: 0, mediana: 0, grande: 0 };
    let juegoEnCurso = false;
    let historialRondas = [];
    let modoEquipos = false;
    let equipos = [];
    let configuracionEquipos = [];
    let turnoEquipo = 0;          // Qu√© equipo est√° jugando
    let turnoJugadorEnEquipo = 0; // Qu√© jugador del equipo actual est√° jugando
    let turnoAlternados = [];
    let turnoActualIndex = 0;
    let modoJuegoPorMeta = true; // true = por meta, false = por rondas
    let numeroRondasTotal = 5;   // n√∫mero total de rondas cuando se juega por rondas 

    function mostrarConfiguracion() {
      document.getElementById('modalConfiguracion').style.display = 'block';
    }

function configurarJugadores() {
    let cantidad;
    
    if (modoEquipos) {
        const numEquipos = parseInt(document.getElementById('numEquipos').value);
        const jugadoresPorEquipo = parseInt(document.getElementById('jugadoresPorEquipo').value);
        cantidad = numEquipos * jugadoresPorEquipo;
        
        // Guardar configuraci√≥n de equipos
        configuracionEquipos = {
            numEquipos: numEquipos,
            jugadoresPorEquipo: jugadoresPorEquipo
        };
    } else {
        cantidad = parseInt(document.getElementById('numJugadores').value);
    }

    if (!cantidad || cantidad < 1) {
        alert('Por favor configura correctamente los jugadores');
        return;
    }

    // NUEVA L√ìGICA: Configurar seg√∫n tipo de juego
    if (modoJuegoPorMeta) {
        if (modoEquipos) {
            meta = parseInt(document.getElementById('metaPuntajeEquipos').value) || 150;
        } else {
            meta = parseInt(document.getElementById('metaPuntaje').value) || 100;
        }
        numeroRondasTotal = 999; // N√∫mero muy alto para que no termine por rondas
    } else {
        if (modoEquipos) {
            numeroRondasTotal = parseInt(document.getElementById('numRondasEquipos').value) || 5;
        } else {
            numeroRondasTotal = parseInt(document.getElementById('numRondas').value) || 5;
        }
        meta = 999999; // Meta muy alta para que no termine por puntaje
    }

    puntos.pequena = parseInt(document.getElementById('ranaPequena').value);
    puntos.mediana = parseInt(document.getElementById('ranaMediana').value);
    puntos.grande = parseInt(document.getElementById('ranaGrande').value);

    generarInputsJugadores(cantidad);
    
    cerrarModal('modalConfiguracion');
    document.getElementById('modalJugadores').style.display = 'block';
}
    
    function generarInputsJugadores(cantidad) {
    const container = document.getElementById('jugadoresInputs');
    container.innerHTML = '';

    if (modoEquipos) {
        const { numEquipos, jugadoresPorEquipo } = configuracionEquipos;
        
        for (let equipo = 0; equipo < numEquipos; equipo++) {
            const equipoDiv = document.createElement('div');
            equipoDiv.style.marginBottom = '20px';
            equipoDiv.style.padding = '15px';
            equipoDiv.style.backgroundColor = '#f8f9fa';
            equipoDiv.style.borderRadius = '10px';
            equipoDiv.style.border = '2px solid #76b947';
            
            equipoDiv.innerHTML = `<h3 style="color: #76b947; text-align: center;">ü§º‚Äç Equipo ${equipo + 1}</h3>`;
            
            for (let jugador = 0; jugador < jugadoresPorEquipo; jugador++) {
                const playerDiv = document.createElement('div');
                playerDiv.className = 'player-input';
                const indiceGlobal = equipo * jugadoresPorEquipo + jugador;
                playerDiv.innerHTML = `
                    <label>Jugador ${jugador + 1}:</label>
                    <input type="text" id="jugador${indiceGlobal}" placeholder="Nombre del jugador..." required>
                `;
                equipoDiv.appendChild(playerDiv);
            }
            container.appendChild(equipoDiv);
        }
    } else {
        // Modo normal (como estaba antes)
        for (let i = 0; i < cantidad; i++) {
            const playerDiv = document.createElement('div');
            playerDiv.className = 'player-input';
            playerDiv.innerHTML = `
                <label>Nombre del Jugador ${i + 1}:</label>
                <input type="text" id="jugador${i}" placeholder="Ingresa el nombre..." required>
            `;
            container.appendChild(playerDiv);
        }
    }
}

    // Crear lista alternada al inicializar
function crearListaAlternada() {
    let listaAlternada = [];
    
    // Verificar que los equipos tengan miembros
    if (!equipos || equipos.length === 0) {
        return [];
    }
    
    let maxJugadoresPorEquipo = Math.max(...equipos.map(e => e.miembros ? e.miembros.length : 0));
    
    for (let rondaJugador = 0; rondaJugador < maxJugadoresPorEquipo; rondaJugador++) {
        for (let equipoIndex = 0; equipoIndex < equipos.length; equipoIndex++) {
            if (equipos[equipoIndex].miembros && equipos[equipoIndex].miembros[rondaJugador]) {
                listaAlternada.push({
                    jugador: equipos[equipoIndex].miembros[rondaJugador],
                    equipo: equipoIndex
                });
            }
        }
    }
    return listaAlternada;
}
    
function obtenerJugadorActual() {
    if (modoEquipos) {
        if (turnosAlternados && turnosAlternados.length > 0 && turnoActualIndex < turnosAlternados.length) {
            return turnosAlternados[turnoActualIndex].jugador;
        } else {
            // Fallback: devolver el primer jugador disponible
            return jugadores[0];
        }
    } else {
        return jugadores[turno];
    }
} 
function iniciarJuego() {
    let cantidad;
    
    if (modoEquipos) {
        cantidad = configuracionEquipos.numEquipos * configuracionEquipos.jugadoresPorEquipo;
    } else {
        cantidad = parseInt(document.getElementById('numJugadores').value);
    }

    jugadores = [];
    equipos = [];
    historialRondas = [];

if (modoEquipos) {
    // Inicializar equipos PRIMERO
    for (let e = 0; e < configuracionEquipos.numEquipos; e++) {
        equipos.push({
            nombre: `Equipo ${e + 1}`,
            total: 0,
            pequena: 0,
            mediana: 0,
            grande: 0,
            miembros: [],
            rondasDetalle: []
        });
    }
}

    for (let i = 0; i < cantidad; i++) {
        const nombre = document.getElementById(`jugador${i}`).value.trim();
        if (!nombre) {
            alert(`Por favor ingresa el nombre del jugador ${i + 1}`);
            return;
        }
        
        const jugador = {
            nombre,
            total: 0,
            pequena: 0,
            mediana: 0,
            grande: 0,
            rondasDetalle: []
        };

        if (modoEquipos) {
            const equipoIndex = Math.floor(i / configuracionEquipos.jugadoresPorEquipo);
            jugador.equipo = equipoIndex;
            equipos[equipoIndex].miembros.push(jugador);
        }
        
        jugadores.push(jugador);
    }

// Crear lista alternada DESPU√âS de que todos los jugadores est√©n asignados a equipos
if (modoEquipos) {
    turnosAlternados = crearListaAlternada();
    turnoActualIndex = 0;
}

juegoEnCurso = true;
ronda = 1;
turno = 0;
turnoEquipo = 0;
turnoJugadorEnEquipo = 0;

cerrarModal('modalJugadores');
document.getElementById('inicio').style.display = 'none';
document.getElementById('tablaContainer').style.display = 'block';
actualizarTabla();
actualizarTurnoInfo();

// Anunciar el primer turno
setTimeout(() => {
    const primerJugador = obtenerJugadorActual();
    anunciarTurno(primerJugador.nombre);
}, 1000);
}

function obtenerJugadorActual() {
    if (modoEquipos) {
        return turnosAlternados[turnoActualIndex].jugador;
    } else {
        return jugadores[turno];
    }
}
    
    // FUNCI√ìN MODIFICADA
    function mostrarTurno() {
      if (!juegoEnCurso) return;
      
const jugadorActual = obtenerJugadorActual();
let tituloTurno = `üéØ Turno de ${jugadorActual.nombre} - Ronda ${ronda}`;

if (modoEquipos && jugadorActual.equipo !== undefined) {
    tituloTurno += ` (${equipos[jugadorActual.equipo].nombre})`;
}

document.getElementById('tituloTurno').textContent = tituloTurno;
      
      // Actualizar informaci√≥n de puntajes en el modal
      document.getElementById('puntajeInfo').innerHTML = `
        <strong>Instrucciones:</strong><br>
        1. Ingresa el puntaje total obtenido en el tiro<br>
        2. Selecciona manualmente cu√°ntas ranas de cada tipo obtuviste<br>
        <em>El sistema te mostrar√° el c√°lculo autom√°tico para verificar</em>
      `;

      // Actualizar los valores de puntos en el modal
      document.getElementById('puntosRanaPeque√±a').textContent = `${puntos.pequena} pts c/u`;
      document.getElementById('puntosRanaMediana').textContent = `${puntos.mediana} pts c/u`;
      document.getElementById('puntosRanaGrande').textContent = `${puntos.grande} pts c/u`;
      
      // Resetear valores
      document.getElementById('puntajeTiro').value = 0;
      document.getElementById('cantidadRanaPequena').value = 0;
      document.getElementById('cantidadRanaMediana').value = 0;
      document.getElementById('cantidadRanaGrande').value = 0;
      actualizarCalculoTotal();
      
      document.getElementById('modalTurno').style.display = 'block';
      document.getElementById('puntajeTiro').focus();
    }

    // NUEVA FUNCI√ìN PARA CALCULAR TOTAL
    function actualizarCalculoTotal() {
      const pequenas = parseInt(document.getElementById('cantidadRanaPequena').value) || 0;
      const medianas = parseInt(document.getElementById('cantidadRanaMediana').value) || 0;
      const grandes = parseInt(document.getElementById('cantidadRanaGrande').value) || 0;
      
      const totalRanas = (pequenas * puntos.pequena) + (medianas * puntos.mediana) + (grandes * puntos.grande);
      
      document.getElementById('totalCalculado').innerHTML = `
        Total por ranas: <strong>${totalRanas}</strong> puntos<br>
        <small>(${pequenas} √ó ${puntos.pequena} + ${medianas} √ó ${puntos.mediana} + ${grandes} √ó ${puntos.grande})</small>
      `;
    }

    // FUNCI√ìN MODIFICADA
    function registrarTiro() {
      const puntajeTotal = parseInt(document.getElementById('puntajeTiro').value) || 0;
      const pequenas = parseInt(document.getElementById('cantidadRanaPequena').value) || 0;
      const medianas = parseInt(document.getElementById('cantidadRanaMediana').value) || 0;
      const grandes = parseInt(document.getElementById('cantidadRanaGrande').value) || 0;

      if (puntajeTotal < 0) {
        alert('El puntaje no puede ser negativo');
        return;
      }

      if (pequenas < 0 || medianas < 0 || grandes < 0) {
        alert('Las cantidades de ranas no pueden ser negativas');
        return;
      }

      // Registrar el puntaje y las ranas manualmente seleccionadas
      registrarPuntaje(puntajeTotal, pequenas, medianas, grandes);
    }

    function registrarPuntaje(puntaje, pequenas, medianas, grandes) {
      let jugador = obtenerJugadorActual();
      
      // Actualizar contadores
      jugador.pequena += pequenas;
      jugador.mediana += medianas;
      jugador.grande += grandes;
      jugador.total += puntaje;
      // Guardar detalle de esta ronda
      jugador.rondasDetalle[ronda - 1] = {
        puntaje: puntaje,
        pequenas,
        medianas,
        grandes
};
if (modoEquipos) {
  const equipo = equipos[jugador.equipo];
  equipo.total += puntaje;
  equipo.pequena += pequenas;
  equipo.mediana += medianas;
  equipo.grande += grandes;
}

      // Si estamos en modo equipos, actualizar tambi√©n los totales del equipo
// Avanzar turno
// Avanzar turno
if (modoEquipos) {
    turnoActualIndex++;
    if (turnoActualIndex >= turnosAlternados.length) {
        turnoActualIndex = 0;
        ronda++;
    }
} else {
    turno++;
    if (turno >= jugadores.length) {
        turno = 0;
        ronda++;
    }
}

// Verificar si hay ganador
const hayGanador = verificarGanador();

// Solo anunciar siguiente turno si el juego contin√∫a
if (!hayGanador) {
    const siguienteJugador = obtenerJugadorActual();
    
    // Peque√±o retraso para que se cierre el modal primero
    setTimeout(() => {
        anunciarTurno(siguienteJugador.nombre);
    }, 500);
}
      
actualizarTabla();
actualizarTurnoInfo();
cerrarModal('modalTurno');
    }
function verificarGanador() {
    let hayGanador = false;
    let ganador = null;
    let esEquipo = false;
    
    if (modoJuegoPorMeta) {
        // Verificar por meta de puntaje
        if (modoEquipos) {
            ganador = equipos.find(equipo => equipo.total >= meta);
            if (ganador) {
                hayGanador = true;
                esEquipo = true;
            }
        } else {
            ganador = jugadores.find(jugador => jugador.total >= meta);
            if (ganador) {
                hayGanador = true;
                esEquipo = false;
            }
        }
    } else {
        // Verificar por n√∫mero de rondas
        if (ronda > numeroRondasTotal) {
            if (modoEquipos) {
                ganador = [...equipos].sort((a, b) => b.total - a.total)[0];
                esEquipo = true;
            } else {
                ganador = [...jugadores].sort((a, b) => b.total - a.total)[0];
                esEquipo = false;
            }
            hayGanador = true;
        }
    }
    
if (hayGanador && ganador) {
    mostrarResumenFinal(ganador, esEquipo);
    return true; // L√çNEA AGREGADA
}
return false; // L√çNEA AGREGADA
}
    
function actualizarTabla() {
    const cuerpo = document.getElementById('cuerpoTabla');
    cuerpo.innerHTML = '';
    
    if (modoEquipos) {
        // Mostrar tabla por equipos
        const equiposOrdenados = [...equipos].sort((a, b) => b.total - a.total);
        
        equiposOrdenados.forEach((equipo, index) => {
            const fila = document.createElement('tr');
            if (index === 0 && equipo.total > 0) {
                fila.style.backgroundColor = '#d4edda';
            }
            fila.innerHTML = `
                <td><strong>${equipo.nombre}</strong></td>
                <td><strong>${equipo.total}</strong></td>
                <td>${equipo.pequena}</td>
                <td>${equipo.mediana}</td>
                <td>${equipo.grande}</td>
            `;
            cuerpo.appendChild(fila);
            
            // Mostrar miembros del equipo
            equipo.miembros.forEach(miembro => {
                const filaMiembro = document.createElement('tr');
                filaMiembro.style.backgroundColor = '#f8f9fa';
                filaMiembro.style.fontSize = '0.9em';
                filaMiembro.innerHTML = `
                    <td style="padding-left: 30px;">‚Üí ${miembro.nombre}</td>
                    <td>${miembro.total}</td>
                    <td>${miembro.pequena}</td>
                    <td>${miembro.mediana}</td>
                    <td>${miembro.grande}</td>
                `;
                cuerpo.appendChild(filaMiembro);
            });
        });
    } else {
        // Tabla normal (c√≥digo existente)
        const jugadoresOrdenados = [...jugadores].sort((a, b) => b.total - a.total);
        
        jugadoresOrdenados.forEach((j, index) => {
            const fila = document.createElement('tr');
            if (index === 0 && j.total > 0) {
                fila.style.backgroundColor = '#d4edda';
            }
            fila.innerHTML = `
                <td>${j.nombre}</td>
                <td><strong>${j.total}</strong></td>
                <td>${j.pequena}</td>
                <td>${j.mediana}</td>
                <td>${j.grande}</td>
            `;
            cuerpo.appendChild(fila);
        });
    }
}

function actualizarTurnoInfo() {
    const jugadorActual = obtenerJugadorActual();
    let infoTurno = `üéÆ <strong>Ronda ${ronda}</strong>`;
    
    // Mostrar informaci√≥n del tipo de juego
    if (!modoJuegoPorMeta) {
        infoTurno += ` de ${numeroRondasTotal}`;
    }
    
    infoTurno += ` - ‚è≠Ô∏è <strong>Turno:</strong> ${jugadorActual.nombre}`;
    
    if (modoEquipos && turnosAlternados.length > 0) {
        const equipoActual = turnosAlternados[turnoActualIndex].equipo;
        infoTurno += ` (${equipos[equipoActual].nombre})`;
    }
    
    if (modoJuegoPorMeta) {
        infoTurno += ` - üéØ <strong>Meta:</strong> ${meta} puntos`;
    } else {
        infoTurno += ` - üèÅ <strong>Rondas restantes:</strong> ${Math.max(0, numeroRondasTotal - ronda + 1)}`;
    }
    
    const info = document.getElementById('turnoInfo');
    info.innerHTML = infoTurno;
}
    
    function anunciarGanador(nombre) {
        const mensaje = `Felicitaciones ${nombre}, eres el ganador`;

        const utterance = new SpeechSynthesisUtterance(mensaje);
        utterance.lang = 'es-ES';      // Espa√±ol latino
        utterance.rate = 1.1;            // Velocidad normal
        utterance.pitch = 2;           // Tono de voz
        utterance.volume = 1;          // Volumen m√°ximo

        speechSynthesis.cancel();      // Por si hay otra voz habl√°ndose
        speechSynthesis.speak(utterance);
      }
    
function anunciarTurno(nombreJugador) {
    const frases = [
        `¬°Atenci√≥n! Es el turno de ${nombreJugador}! ¬°Dale con todo!`,
        `¬°Ahora le toca a ${nombreJugador}! ¬°A demostrar tu punter√≠a!`,
        `¬°Es el momento de ${nombreJugador}! ¬°Que vuelen las fichas!`,
        `¬°${nombreJugador}, es tu turno! ¬°A por la victoria!`,
        `¬°Lleg√≥ el turno de ${nombreJugador}! ¬°Apunta y dispara!`,
        `¬°${nombreJugador}, demuestra tu habilidad! ¬°Es tu momento!`,
        `¬°Atenci√≥n todos! ¬°${nombreJugador} est√° listo para jugar!`
    ];
    
    let mensaje = frases[Math.floor(Math.random() * frases.length)];
    
    // Si est√° en modo equipos, agregar el nombre del equipo con m√°s energ√≠a
    if (modoEquipos) {
        const jugadorActual = obtenerJugadorActual();
        if (jugadorActual.equipo !== undefined) {
            mensaje = `¬°Es el turno de ${nombreJugador} del ${equipos[jugadorActual.equipo].nombre}! ¬°TIRAArr!`;
        }
    }

    const utterance = new SpeechSynthesisUtterance(mensaje);
    utterance.lang = 'es-ES';
    utterance.rate = 1.2;            // M√°s r√°pido para m√°s energ√≠a
    utterance.pitch = 2;           // Tono m√°s alto y en√©rgico
    utterance.volume = 1.1;          // Volumen m√°ximo

    speechSynthesis.cancel();
    speechSynthesis.speak(utterance);
}

function mostrarResumenFinal(ganador, esEquipo = false) {
    juegoEnCurso = false;
    
    // Mostrar informaci√≥n del ganador
document.getElementById('ganadorFinal').innerHTML = `
    <div class="winner-alert">
        üèÜ ¬°FELICITACIONES! üèÜ<br>
        <strong>${ganador.nombre}</strong> ha ganado con <strong>${ganador.total}</strong> puntos!
        ${esEquipo ? '<br><small>üéâ ¬°Victoria en equipo! üéâ</small>' : ''}
        <br><small>${modoJuegoPorMeta ? 'üéØ Victoria por meta alcanzada' : 'üîÑ Victoria por mayor puntaje en ' + numeroRondasTotal + ' rondas'}</small>
    </div>
      `;

      // Crear tabla de resumen por rondas
      let tablaHTML = `
        <h3>üìä Resumen Detallado por Rondas</h3>
        <table>
          <thead>
            <tr>
              <th>Jugador</th>
              <th>Total</th>
      `;
      
      // Agregar columnas para cada ronda
      for (let i = 1; i <= ronda; i++) {
        tablaHTML += `<th>Ronda ${i}</th>`;
      }
      
      tablaHTML += `
            </tr>
          </thead>
          <tbody>
      `;

      // Ordenar jugadores por puntaje final
      const jugadoresOrdenados = [...jugadores].sort((a, b) => b.total - a.total);

      jugadoresOrdenados.forEach((jugador, index) => {
        tablaHTML += `
          <tr ${index === 0 ? 'style="background-color: #d4edda;"' : ''}>
            <td><strong>${jugador.nombre}</strong></td>
            <td><strong>${jugador.total}</strong></td>
        `;
        
        // Agregar puntajes por ronda
        for (let i = 0; i < ronda; i++) {
          const rondaData = jugador.rondasDetalle[i];
          if (rondaData) {
            tablaHTML += `<td>${rondaData.puntaje}</td>`;
          } else {
            tablaHTML += `<td>0</td>`;
          }
        }
        
        tablaHTML += `</tr>`;
      });

      tablaHTML += `
          </tbody>
        </table>

        <h3>üê∏ Resumen de Ranas por Jugador</h3>
        <table>
          <thead>
            <tr>
              <th>Jugador</th>
              <th>üê∏ Peque√±as (${puntos.pequena}pts)</th>
              <th>üê∏ Medianas (${puntos.mediana}pts)</th>
              <th>üê∏ Grandes (${puntos.grande}pts)</th>
              <th>Total Puntos</th>
            </tr>
          </thead>
          <tbody>
      `;

      jugadoresOrdenados.forEach((jugador, index) => {
        tablaHTML += `
          <tr ${index === 0 ? 'style="background-color: #d4edda;"' : ''}>
            <td><strong>${jugador.nombre}</strong></td>
            <td>${jugador.pequena}</td>
            <td>${jugador.mediana}</td>
            <td>${jugador.grande}</td>
            <td><strong>${jugador.total}</strong></td>
          </tr>
        `;
      });

      tablaHTML += `
          </tbody>
        </table>
      `;

      document.getElementById('resumenContenido').innerHTML = tablaHTML;
      createConfettiBurst();
      anunciarGanador(ganador.nombre);
      const audio = document.getElementById('audioResumen');
        audio.volume = 0.8; // puedes ajustar el volumen aqu√≠
        audio.currentTime = 0;
        audio.play().catch(e => console.log('Error al reproducir audio:', e));
      document.getElementById('modalResumen').style.display = 'block';
    }

    function reiniciarJuego() {
      if (confirm('¬øEst√°s seguro de que quieres reiniciar el juego?')) {
        location.reload();
      }
    }

    function cerrarModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
      if (modalId === 'modalResumen') {
        location.reload();
      }
    }

    function volverConfiguracion() {
      cerrarModal('modalJugadores');
      document.getElementById('modalConfiguracion').style.display = 'block';
    }

    // Cerrar modales al hacer clic fuera
    window.onclick = function(event) {
      if (event.target.classList.contains('modal')) {
        event.target.style.display = 'none';
      }
    }

    // Permitir Enter para confirmar acciones
    document.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        if (document.getElementById('modalConfiguracion').style.display === 'block') {
          configurarJugadores();
        } else if (document.getElementById('modalJugadores').style.display === 'block') {
          iniciarJuego();
        } else if (document.getElementById('modalTurno').style.display === 'block') {
          registrarTiro();
        }
      }
    });
  </script>
</body>
</html>
